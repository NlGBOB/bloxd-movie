const width = 70;
const height = 68;
const imageDataString = "";

const BLOCKS_PER_TICK = 128;
const DRAW_TAG = 'pixel_art_drawer';
const startPos = [thisPos[0], thisPos[1] + 3, thisPos[2]];
const drawImageChunk = (startIndex) => {
    let i = startIndex;
    const nextChunkEnd = i + BLOCKS_PER_TICK;
    const totalLength = imageDataString.length;
    const endIndex = totalLength ^ ((nextChunkEnd ^ totalLength) & -(nextChunkEnd < totalLength));
    do {
        const char = imageDataString[i];
        const blockName = B[char];
        const x = startPos[0] + (i % width);
        const y = startPos[1] + (height - 1 - Math.floor(i / width));
        const z = startPos[2];
        api.setBlock(x, y, z, blockName);
        i++;
    } while (i < endIndex);

    if (i < imageDataString.length)
        S.run(() => drawImageChunk(i), 1, DRAW_TAG);
};

S.stop(DRAW_TAG);
S.run(() => drawImageChunk(0), 0, DRAW_TAG);
